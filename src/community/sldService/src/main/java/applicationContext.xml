<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
  <bean id="sldServiceRestConfigMapping" class="org.geoserver.rest.RESTMapping">
	<property name="routes">
      <map>
        <entry>
          <key><value>/sldservice/{featureType}/styles</value></key>
          <value>listUserStylesResource</value>
        </entry>
        <entry>
          <key><value>/sldservice/{featureType}/styles/{userStyleID}</value></key>
          <value>userStyleResource</value>
        </entry>
        <entry>
          <key><value>/sldservice/{featureType}/styles/{userStyleID}/{featureTypeID}</value></key>
          <value>featureTypeStyleResource</value>
        </entry>
        <entry>
          <key><value>/sldservice/{featureType}/styles/{userStyleID}/{featureTypeID}/rules</value></key>
          <value>rulesResource</value>
        </entry>
        <entry>
          <key><value>/sldservice/{featureType}/styles/{userStyleID}/{featureTypeID}/rules/{firstRuleId}</value></key>
          <value>rulesResource</value>
        </entry>
        <entry>
          <key><value>/sldservice/updateLayer/{layerName}</value></key>
          <value>updateLayerResource</value>
        </entry>
        <entry>
          <key><value>/sldservice/{layer}/attributes</value></key>
          <value>layerAttributesFinder</value>
        </entry>
        <entry>
          <key><value>/sldservice/{featureType}/classify</value></key>
          <value>classifierFinder</value>
        </entry>
      </map>
    </property>
  </bean>

  <!-- REFACTORED -->
  <bean id="classifierFinder" class="org.geoserver.sldservice.finder.ClassifierResourceFinder" parent="abstractCatalogFinder"/>

  <bean id="layerAttributesFinder" class="org.geoserver.sldservice.finder.LayerAttributesFinder" parent="abstractCatalogFinder"/>


  <!-- TO BE REFACTORED -->
  <bean id="featureTypeStyleResource"
    class="org.geoserver.sldservice.resource.FeatureTypeStyleResource">
    <constructor-arg index="0" ref="catalog" />
  </bean>

  <bean id="listUserStylesResource"
    class="org.geoserver.sldservice.resource.ListUserStyles">
    <constructor-arg index="0" ref="catalog" />
  </bean>

  <bean id="rulesResource"
    class="org.geoserver.sldservice.resource.RulesResource">
    <constructor-arg index="0" ref="catalog" />
  </bean>

  <bean id="updateLayerResource"
    class="org.geoserver.sldservice.resource.UpdateLayerResource">
    <constructor-arg index="0" ref="dataConfig" />
    <constructor-arg index="1" ref="catalog" />
  </bean>

  <bean id="userStyleResource"
    class="org.geoserver.sldservice.resource.UserStyleResource">
    <constructor-arg index="0" ref="catalog" />
    <constructor-arg index="1" ref="dataConfig" />
  </bean>

</beans>
