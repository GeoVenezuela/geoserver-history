<project xmlns:j="jelly:core" xmlns:u="jelly:util" xmlns:ant="jelly:ant" xmlns:maven="jelly:maven" xmlns:deploy="deploy" default="run">
	
	<goal name="run">
		<!-- kind of a hack but remove the log4j lib from app -->
		<ant:delete>
			<ant:fileset dir="${basedir}/../target/geoserver" includes="**/log4j*.jar"/>
		</ant:delete>

		<!-- fire up the server -->
 		<ant:java classname="org.mortbay.start.Main" dir="${basedir}" fork="yes" failonerror="yes">
      <ant:classpath>
				<ant:pathelement location="${maven.build.dest}"/>

				<j:forEach var="dep" items="${pom.dependencies}">
					<j:if test="${dep.getProperty('war.bundle')!='true'}">
						<ant:pathelement location="${maven.repo.local}/${dep.groupId}/jars/${dep.artifactId}-${dep.version}.jar"/>
					</j:if>
				</j:forEach>

			</ant:classpath>
      <ant:arg line="${basedir}/etc/jetty.xml" />
    </ant:java>

	</goal>


</project>
