<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><head>
<!--
/*
* Project quickWMS: Generic JavaScript WMS Client 
* quickWMS - multiple layer request according to OpenGIS Web Mapping Specification
* Author : Pedro Pereira Gonçalves (pedro@inovagis.org)
* File : map.htm
* Version : 0.01
* Last Change : 2003-10-24
* Dependencies : WMSbrowsers.js, WMSlayer.js, WMSmap.js
* Future Developments : 
* Tested on : Netscape 7.0, Netscape 4.7, IE 5.5, IE 6.0
* History :
	2003-10-24 : File Created
*/
-->
<link rel="stylesheet" href="help.css">

<link rel="stylesheet" href="inc/quickWMS.css">
<script language="Javascript" src="inc/WMSbrowsers.js"></script>
<script language="Javascript" src="inc/WMSlayer.js"></script>
<script language="Javascript" src="inc/WMSmap.js"></script>
<script language="Javascript" src="inc/WMStools.js"></script>
<script language="Javascript" src="inc/WMSquick.js"></script>


<title>WMS Client</title>
</head>
<body>

<script language='Javascript'>
// WMS servers - list here other OGC compliant map servers 
// Changes:	2003-10-24 : Added http:// to the DEMIS and ESRIN server urls 
var demisWMS = "http://www.demis.nl/mapserver/request.asp";
var esaWMS = "http://mapserv2.esrin.esa.it/cubestor/cubeserv/cubeserv.cgi";

	function writeMaps(){
		var map = new quickWMS(-180, -90, 180, 90);
		// events 
		map.onError = function (layer){alert("Unable to load " + layer.caption + "\n from server " + layer.wmsUrl)}

		map.addLayer(esaWMS, "WORLD_MODIS_1KM:MapAdmin", "1.0.0", "Modis Mosaic");		
		map.addLayer(demisWMS, "Coastlines", "1.0.0", "World Coastlines");	

		// Lets set a error layer 
		map.addLayer("http://nowhere.space", "WORLD", "1.0.0", "Test Layer");		
		map.layers[0].format="JPEG";			
		map.writeDOM("myMap", 350, 195, 350, 175, "background-color:white;border-style:solid;border-width:1;border-color:black;");
		map.toolbar = new toolBar(map);
		map.toolbar.writeDOM(350,170,true);		
		map.initialize();
		map.refresh();		
		}
writeMaps()	
</script>	

<table width="700"><tr><td>
<!-- WEBpage Information -->
<tr><td align="justify">

<img src="images/logo.gif" width=62 height=64 border=0 alt="" align="middle">
 &nbsp;&nbsp;<a href="index.htm"><img src="images/quickWMS.gif" width=121 height=23 border=0 alt=""></a>

<div align="right">pre-release (May, 2003)
<br>&copy; Pedro Pereira Gon&ccedil;alves (<a href="mailto:pedro&#064;inovagis.org">pedro&#064;inovagis.org</a>)<BR>
</div>
<hr noshade>
</td></tr><tr><td>

Project <a href="index.htm">quickWMS</a>: Generic JavaScript WMS Client<br>
<b>Example</b> : Error Handling - multiple layer request example according to OpenGIS Web Mapping Specification using <a href="quickwms.htm">quickWMS</a> class but where one of the url does not exists<br>
<b>Author</b> : Pedro Pereira Gonçalves (pedro&#064;inovagis.org)<br>
<b>Version</b> : 0.01<br>
<b>Last Change </b>: 2003-10-24<br>
<b>Tested on </b>: Netscape 4.7, 7.0 and 7.1, <br>Mozilla 1.4.1, IE 5.5, IE 6.0, Camino 0.7(Mac-OS )
<br><br><br><br><br><br><br>
<b>Source Code</b>
<ul>
<P>&lt;<FONT color=#800000>script</FONT><FONT color=#ff0000> language</FONT><FONT color=#0000ff>='</FONT><FONT color=#000000>Javascript</FONT><FONT color=#0000ff>'&gt;</FONT></P><FONT color=#0000ff><FONT color=#000000>
<P><FONT color=green>// WMS servers - list here other OGC compliant map servers <BR></FONT>
<FONT color=green>// Changes:	2003-10-24 : Added http:// to the DEMIS and ESRIN server urls <br></FONT>
<FONT color=blue><strong>var</strong></FONT> demisWMS </FONT><FONT color=#0000ff>=</FONT><FONT color=#000000> <FONT color=blue>"http://www.demis.nl/mapserver/request.asp"</FONT>;<br></FONT></FONT>
<FONT color=blue><strong>var</strong></FONT> esaWMS </FONT><FONT color=#0000ff>=</FONT><FONT color=#000000> <FONT color=blue>"http://mapserv2.esrin.esa.it/cubestor/cubeserv/cubeserv.cgi"</FONT>;</P></FONT></FONT>

<FONT color=#000000>
<P><FONT color=blue><strong>function</strong></FONT> writeMaps(){</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT color=blue><strong>var</strong></FONT> map </FONT><FONT color=#0000ff>=</FONT><FONT color=#000000> <strong><FONT color=blue>new</FONT></strong> <FONT color=brown>mapWMS</FONT>(<FONT color=magenta>-180</FONT><FONT color=magenta>,-90</FONT>,<FONT color=magenta>180</FONT>,<FONT color=magenta>90</FONT>);

<P><FONT color=green>	// events  </FONT>
<BR>map.<FONT color=brown>onError</FONT> = <FONT color=blue><strong>function</FONT></strong> (layer){alert(<FONT color=magenta>"Unable to load "</FONT> + layer.<FONT color=brown>caption</FONT> + <FONT color=magenta>"\n from server "</FONT> + layer.<FONT color=brown>wmsUrl</FONT>)}

<P>map.<FONT color=brown>addLayer</FONT>(esaWMS, <FONT color=blue>"WORLD_MODIS_1KM:MapAdmin"</FONT>);<BR>
map.<FONT color=brown>addLayer</FONT>(demisWMS, <FONT color=blue>"Coastlines"</FONT>);
<P><FONT color=green>// Lets set a error layer </FONT>
<BR>map.<FONT color=brown>addLayer</FONT>(<FONT color=blue>"http://nowhere.space"</FONT>, <FONT color=blue>"WORLD"</FONT>, <FONT color=blue>"1.0.0"</FONT>, <FONT color=blue>"Test Layer"</FONT>);		
<P>map.<FONT color=brown>layers</FONT>[<FONT color=magenta>0</FONT>].</FONT><FONT color=brown>format</FONT><FONT color=#0000ff>=</FONT><FONT color=#000000><FONT color=blue>"JPEG"</FONT>; 
<BR>map.<FONT color=brown>writeDOM</FONT>(<FONT color=blue>"myMap"</FONT>, <FONT color=magenta>350</FONT>, <FONT color=magenta>175</FONT>, <FONT color=magenta>350</FONT>, <FONT color=magenta>175</FONT>, <FONT color=blue>"background-color:white; border-style:solid; border-width:1; border-color:black;"</FONT>); <BR>
</FONT>
map.<FONT color=brown>toolbar</FONT> = <strong><FONT color=blue>new</FONT></strong> <FONT color=brown>toolBar</FONT>(map);<br>
map.<FONT color=brown>toolbar</FONT>.<FONT color=brown>writeDOM</FONT>(<FONT color=magenta>350</FONT>, <FONT color=magenta>170</FONT>, <strong><FONT color=blue>true</FONT></strong>);<br>		
map.<FONT color=brown>initialize</FONT>();	 <BR>
map.<FONT color=brown>refresh</FONT>();<BR></FONT></P></BLOCKQUOTE>
	
<P><FONT color=#000000>}<BR></FONT>writeMaps();<BR><FONT color=#0000ff>&lt;/</FONT><FONT color=#800000>script</FONT><FONT color=#0000ff>&gt;</FONT><FONT color=#000000> </P></FONT> 

</P>
</ul>
<hr noshade>
</td></tr></table>
</body></html>
