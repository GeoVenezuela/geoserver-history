<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- #BeginTemplate "/Templates/main.dwt" -->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta content="Rob Hranac" name="author">
<!-- #BeginEditable "doctitle" -->
  <title>the GeoServer Project :: Documentation</title>
<!-- #EndEditable -->
  <style type="text/css">
<!--
.title {  font-family: Arial, Helvetica, sans-serif; font-size: 14pt; color: #FFFFFF; font-weight: bold}
.navigation {  font-family: Arial, Helvetica, sans-serif; font-size: 12px; font-weight: bold; color: #333366}
.header { font-family: Arial, Helvetica, sans-serif; font-size: 16px; font-weight: bold; color: #333366 }
.finePrint { font-family: Arial, Helvetica, sans-serif; font-size: 9px; font-weight: lighter; color: #999999}
.navigationSub { font-family: Arial, Helvetica, sans-serif; font-size: 10pt; font-weight: normal; color: #333366 }
.titleSection { font-family: Arial, Helvetica, sans-serif; font-size: 14pt; color: #333366; font-weight: bold }
.modifyMe {  color: #FF0000}
-->
  </style>
</head>
<body vlink="#333366" alink="#333366" link="#333366" text="#000000"
 bgcolor="#ffffff">
<table cellspacing="5" width="100%" border="0">
  <tbody>
    <tr>
      <td colspan="2">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tbody>
          <tr>
            <td><a href="http://geoserver.sourceforge.net"><img
 border="0" align="left"
 src="http://geoserver.sourceforge.net/html/images/logo.gif"></a></td>
            <td align="right" valign="top"><font color="#333366"><strong
 class="header">Documentation</strong></font></td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="2">
      <hr size="1" noshade="noshade"> </td>
    </tr>
    <tr>
      <td valign="top" width="188" height="272">
      <table width="100%" border="0" cellspacing="0" cellpadding="0"
 height="100%">
        <tbody>
          <tr>
            <td valign="top">
            <table cellspacing="5" border="0"
 style="width: 121px; height: 166px;">
              <tbody>
                <tr>
                  <th align="left" colspan="2" height="8"><font
 color="#333366"><strong class="navigation">User</strong></font></th>
                </tr>
                <tr>
                  <td width="11" align="center"><br>
                  </td>
                  <td width="165" class="navigationSub"><font size="-1"><a
 href="install.htm">Install</a></font></td>
                </tr>
                <tr>
                  <td width="11" align="center"><br>
                  </td>
                  <td width="165" class="navigationSub"><font size="-1"><a
 href="schemaTutorial.htm">Schema Tutorial</a></font></td>
                </tr>
                <tr>
                  <td width="11" align="center"><br>
                  </td>
                  <td width="165" class="navigationSub"><font size="-1"><a
 href="advanced.htm">Advanced</a></font></td>
                </tr>
                <tr>
                  <td style="vertical-align: top;"><br>
                  </td>
                  <td style="vertical-align: top;"><span
 style="text-decoration: underline;"></span><a href="wms.htm"> <font
 size="-1"><a href="wms.htm">WMS</a></font></a> </td>
                </tr>
              </tbody>
            </table>
            <table cellspacing="5" border="0">
              <tbody>
                <tr>
                  <th align="left" colspan="2" height="8"><font
 color="#333366"><strong class="navigation">Developer </strong></font></th>
                </tr>
                <tr>
                  <td width="11" align="center"><br>
                  </td>
                  <td width="165" class="navigationSub"><font size="-1"><a
 href="../developer/build.htm">Build</a></font></td>
                </tr>
                <tr>
                  <td width="11" align="center" height="16"><br>
                  </td>
                  <td width="165" height="16" class="navigationSub"><a
 href="../developer/testingUtility.htm">Testing Utility</a></td>
                </tr>
                <tr>
                  <td width="11" align="center" height="16"><br>
                  </td>
                  <td width="165" height="16" class="navigationSub"><a
 href="../developer/license.htm">License</a></td>
                </tr>
                <tr>
                  <td width="11" align="center" height="16"><br>
                  </td>
                  <td width="165" height="16" class="navigationSub"><font
 size="-1"><a
 href="http://geoserver.sourceforge.net/documentation/javadocs/index.html">API</a></font></td>
                </tr>
                <tr>
                  <td width="11" align="center"><br>
                  </td>
                  <td width="165" class="navigationSub"><font size="-1"><a
 href="http://www.opengis.org/docs/02-058.pdf">WFS Specification</a></font></td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
          <tr>
            <td valign="bottom">
            <p><span class="finePrint">Java, Servlets, J2EE, EJB, JDBC,
JNDI, JTA, Sun, Sun Microsystems are trademarks or registered
trademarks of Sun Microsystems, Inc. in the United States and in other
countries. XML, XML Schema, XSLT and related standards are trademarks
or registered trademarks of MIT, INRIA, Keio or others, and a product
of the World Wide Web Consortium. All other product names mentioned
herein are trademarks of their respective owners.</span></p>
            <p>&nbsp;</p>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td valign="top" width="961" height="272">
      <table width="100%" cellpadding="5" cellspacing="5" border="0">
        <tbody>
          <tr>
            <td class="titleSection"><!-- #BeginEditable "Title"  -->WMS
Documentation<!-- #EndEditable --> </td>
          </tr>
        </tbody>
      </table>
<!-- #BeginEditable "main" --> <a name="intro"></a>
      <table width="100%" cellpadding="5" cellspacing="5" border="0">
        <tbody>
          <tr>
            <td bgcolor="#333366" class="title">Introduction<br>
            </td>
          </tr>
          <tr>
            <td height="67">
            <blockquote>
              <p>GeoServer version 1.1.0 introduces integrated support
for Web Map Service.&nbsp; This should allow users to view their data
both as GML (through the WFS) and as images (using the WMS).&nbsp; This
is made possible by porting the GeoTools WMS into the GeoServer
architecture.&nbsp; Configuring the datastores in <span
 style="font-style: italic;">catalog.xml</span> should make them
available to both services.&nbsp; <br>
              </p>
              <p>The WMS still needs some work, and we're hoping that
various developers can devote some good time to it.&nbsp; Right now it
can return GetCapabilities and GetMap, but we have not yet ported the
gt2wms GetFeatureInfo and GetLegendGraphic.&nbsp; We hope to also add
full SLD capabilities eventually, as geotools has a lot of solid SLD
code.&nbsp; The other piece that has not yet ported is caching of
features, which the WFS could also benefit from.&nbsp; GeoServer's
architecture is a bit more complex, so there was no obvious place to
put caching.&nbsp; It should return in a future version.<br>
              </p>
              <p>As for features gained, the WMS now supports the
Scalable Vector Graphics (SVG) image format (though no styling yet), in
addition to the formats of the Geotools renderer (png, graymap, jpeg,
jpeg2000, tiff, bitmap, and others).&nbsp; SVG is an XML-based language
for web graphics, which has the potential to be more compact than other
image formats.&nbsp; As it is xml it can also be fed to style sheets
for complex presentation.&nbsp; <br>
              </p>
              <p>We would love to hear your feedback on the WMS, bugs
and problems you might have, as well as features that you would like to
see added.&nbsp; The best way to report these is with our <a
 href="http://jira.codehaus.org/secure/BrowseProject.jspa?id=10311">tracker</a>.&nbsp;
You will have to create an account to use it, but your email address
will not be used except to notify you when your issue is worked
on.&nbsp; If you are developer then adding more WMS capabilities is a
great way to get involved in the GeoServer project.&nbsp; Soon we will
have some better design documents, but until then just email
geoserver-devel@lists.sourceforge.net and we can point you in the right
directions.</p>
  <p>Note: In order to render most images the java installation running
the WMS needs to be installed with the Java Advanced Imaging and JAI Image 
I/O apis.  The JAI can be downloaded <a href="http://java.sun.com/products/java-media/jai/downloads/download-1_1_2.html">here</a> 
and the Image I/O extension <a href="http://java.sun.com/products/java-media/jai/downloads/download-iio.html">here</a>.  
If neither of these is included then the only format available will be SVG (which
requires a <a href="http://www.adobe.com/svg/viewer/install/main.html">SVG Viewer</a>
).  JAI alone will support jpeg and png, the Image I/O extensions provide even more
formats.
            </blockquote>
            </td>
          </tr>
        </tbody>
      </table>
      <a name="config"></a>
      <table width="100%" cellpadding="5" cellspacing="5" border="0"
 height="90">
        <tbody>
          <tr>
            <td bgcolor="#333366" class="title">Configuration<br>
            </td>
          </tr>
          <tr>
            <td height="56">
            <blockquote>Most of the WMS configuration is the same as
that specified in the <a href="install.htm">installation</a>
document.&nbsp; The <span style="font-style: italic;">services.xml</span>
file will have an additional section that mirrors the WFS service type:<br>
              <br>
              <div style="margin-left: 80px;"><i>&nbsp; &lt;services&gt;</i><br>
              <i>&nbsp;&nbsp;&nbsp; &lt;service type="WMS"
enabled="true"&gt;</i><br>
              <i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;GeoServer
WMS&lt;/name&gt; </i><br>
              <i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;The TOPP
Basemap
Server&lt;/title&gt; </i><br>
              <i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;abstract&gt;This is
a test server.
It contains some basemap data from New York City.&lt;/abstract&gt; </i><br>
              <i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;keywords&gt;&lt;keyword&gt;New
York&lt;/keyword&gt;&lt;keyword&gt;transportation&lt;/keyword&gt;&lt;/keywords&gt;
              </i><br>
              <i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;onlineResource&gt;http://www.openplans.org&lt;/onlineResource&gt;
&nbsp;</i><br>
              <i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;maintainer&gt;The
Open Planning Project&lt;/maintainer&gt; </i><br>
              <i>&nbsp;&nbsp;&nbsp; &lt;/service</i><br>
              <i>&nbsp; &lt;/services&gt;</i><br>
              </div>
&nbsp;<br>
All the tags are for the Service section of the Capabilities document,
so they can be the same or different from the WFS ones.&nbsp; <br>
              <br>
The <span style="font-style: italic;">catalog.xml</span> file is
mostly the same, all datastores defined are available for both WMS and
WFS.&nbsp; The one difference is the addition of the styles section: <br>
              <br>
            </blockquote>
            <p style="margin-left: 120px;"> <i>&lt;?xml version="1.0"
encoding="UTF-8" ?&gt; <br>
&lt;catalog&gt;<br>
&nbsp; &lt;!-- defines the datastores, more than one is possible --&gt;<br>
&nbsp; &lt;datastores&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;
...</i><i><br>
            </i><i style="font-style: italic;">&nbsp;
&lt;/datastores&gt;</i><span style="font-style: italic;"><br>
            </span><span style="font-style: italic;"></span><br>
            <span style="font-style: italic;">&nbsp; &lt;styles&gt;<br>
&nbsp; &nbsp; &lt;style id="green" filename="green.sld"/&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;style id="blue" filename="blue.sld"/&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;style id="normal" filename="normal.sld"/&gt;<br>
&lt;/styles&gt;<br>
            </span></p>
            <div style="margin-left: 120px;"><i>&nbsp;&lt;/catalog&gt;</i><br>
            </div>
            <blockquote><br>
Each id will be the name of the style in a client request.&nbsp; Each
filename must be found in the <span style="font-style: italic;">geoserver/misc/wms/styles</span>
directory (this will probably move in future versions), which is copied
to the webapp in the data/styles directory.&nbsp; Styles still need
some work, as all styles can be requested for all featureTypes, even if
they don't apply.&nbsp; The included green style should work for all
polygons, and the blue style should work for all linestrings.&nbsp; In
the future GeoServer hopes to have each featureType be able to figure
out which styles apply to it, and only return those styles.&nbsp; Right
now it will fail in the renderer if the style can not be applied.&nbsp;
              <br>
            </blockquote>
            </td>
          </tr>
        </tbody>
      </table>
      <a name="testing"></a>
      <table width="100%" cellpadding="5" cellspacing="5" border="0">
        <tbody>
          <tr>
            <td bgcolor="#333366" class="title">Testing <br>
            </td>
          </tr>
          <tr>
            <td height="33">
            <blockquote>The WMS has not yet been tested with many
clients, we would love to hear reports of success.&nbsp; But a standard
web browser should be able to return results.&nbsp; To see the WMS
capabilities document issue the following request to any web browser.<br>
              <br>
              <blockquote>
                <p><i>http://<b>SERVER_ADDRESS</b>:</i><i><b>SERVER_PORT</b>/geoserver/wms?request=GetCapabilities</i></p>
              </blockquote>
Note that <i><b>SERVER_ADDRESS</b></i> and <i><b>SERVER_PORT</b></i>
should be replaced by your server's address and port (localhost:8080
will suffice for the default of tomcat or resin running on your local
machine).&nbsp; The default GeoServer installation should have a
bc_roads featureType by default.&nbsp; To get a map of this feature
issue the request: &nbsp;&nbsp;&nbsp;&nbsp; <span
 style="font-style: italic;"><br>
              <br>
http://localhost:8080/geoserver/wms?request=GetMap&amp;layers=bc_roads&amp;bbox=489153,5433000,<br>
529000,5460816&amp;width=400&amp;height=200&amp;srs=EPSG:27354&amp;styles=normal&amp;Format=image/png<br>
              </span><br>
It should also work with the 'blue' style - just do <span
 style="font-style: italic;">styles=blue</span> instead of <span
 style="font-style: italic;">styles=normal</span>.&nbsp; Other formats
are also available, check the capabilities document.&nbsp; For SVG just
issue <span style="font-style: italic;">Format=image/svg</span>.&nbsp;
<p>If you are using linux and are getting an error like 
'Can't connect to X11 window server using ':0.0' as the value of the DISPLAY 
variable.'  then you need to run the server in headless mode.  The easiest
way to do this is to use Xfvb with a command like: 
'Xvfb :1 -screen 1 1024x768x16 &'.  Then set your DISPLAY variable to 
:1 (export DISPLAY=:1 in bash).  This will render the images in the background,
as x on linux needs somewhere to render images.


              <br>
            </blockquote>
            </td>
          </tr>
        </tbody>
      </table>
<!-- #EndEditable --> </td>
    </tr>
  </tbody>
</table>
<!-- #EndTemplate -->
</body>
</html>
