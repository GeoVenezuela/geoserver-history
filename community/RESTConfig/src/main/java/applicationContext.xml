<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>


<bean id="restConfigMapping" class="org.geoserver.rest.RESTMapping">
<property name="routes">
  <map>
        <entry>
          <key><value>/folders/{folder}/layers/{layer}.{type}</value></key>
          <ref bean="layerFinder"/>
        </entry>
        <entry>
          <key><value>/folders/{folder}/layers/{layer}</value></key>
          <ref bean="layerFinder"/>
        </entry>
        <entry>
          <key><value>/folders/{folder}/layers.{type}</value></key>
          <ref bean="layerListFinder"/>
        </entry>
        <entry>
          <key><value>/folders/{folder}/layers</value></key>
          <ref bean="layerListFinder"/>
        </entry>
        <entry>
          <key><value>/folders/{folder}.{type}</value></key>
          <ref bean="folderConfigFinder"/>
        </entry>
        <entry>
          <key><value>/folders/{folder}</value></key>
          <ref bean="folderConfigFinder"/>
        </entry>
        <entry>
          <key><value>/folders/{folder}/file.{type}</value></key>
          <ref bean="folderFileFinder"/>
        </entry>
        <entry>
          <key><value>/folders.{type}</value></key>
          <ref bean="folderListFinder"/>
        </entry>
        <entry>
          <key><value>/folders</value></key>
          <ref bean="folderListFinder"/>
        </entry>

        <entry>
          <key><value>/styles/{style}.{type}</value></key>
          <ref bean="styleFinder"/>
        </entry>
        <entry>
          <key><value>/styles/{style}</value></key>
          <ref bean="styleFinder"/>
        </entry>
        <entry>
          <key><value>/styles.{type}</value></key>
          <ref bean="styleListFinder"/>
        </entry>
        <entry>
          <key><value>/styles</value></key>
          <ref bean="styleListFinder"/>
        </entry>
<!--    Leave out everything but the data and styles for now 
        <entry>
          <key><value>/layergroups/{group}.{type}</value></key>
          <ref bean="layerGroupFinder"/>
        </entry>
        <entry>
          <key><value>/layergroups/{group}</value></key>
          <ref bean="layerGroupFinder"/>
        </entry>
        <entry>
          <key><value>/layergroups.{type}</value></key>
          <ref bean="layerGroupListFinder"/>
        </entry>
        <entry>
          <key><value>/layergroups</value></key>
          <ref bean="layerGroupListFinder"/>
        </entry>
        <entry>
          <key><value>/projections/{projection}</value></key>
          <ref bean="dummyRestlet"/>
        </entry>
        <entry>
          <key><value>/projections</value></key>
          <ref bean="dummyRestlet"/>
        </entry>
        <entry>
          <key><value>/dummy.{type}</value></key>
          <ref bean="dummyRestlet"/>
        </entry> -->
  </map>
</property>
</bean>

<bean id="layerFinder" class="org.geoserver.restconfig.LayerFinder">
    <property name="dataConfig"><ref bean="dataConfig"/></property>
    <property name="data"><ref bean="data"/></property>
</bean>
<bean id="layerListFinder" class="org.geoserver.restconfig.LayerListFinder">
    <property name="dataConfig"><ref bean="dataConfig"/></property>
    <property name="data"><ref bean="data"/></property>
</bean>
<bean id="folderFileFinder" class="org.geoserver.restconfig.FolderFileFinder">
    <!-- <property name="dataConfig"><ref bean="dataConfig"/></property>
    <property name="data"><ref bean="data"/></property> -->
</bean>
<bean id="folderConfigFinder" class="org.geoserver.restconfig.FolderConfigFinder">
    <property name="dataConfig"><ref bean="dataConfig"/></property>
    <property name="data"><ref bean="data"/></property>
</bean>
<bean id="folderListFinder" class="org.geoserver.restconfig.FolderListFinder">
    <property name="dataConfig"><ref bean="dataConfig"/></property>
</bean>
<bean id="styleFinder" class="org.geoserver.rest.BeanResourceFinder">
  <property name="beanToFind">
    <bean class="org.geoserver.restconfig.StyleResource">
      <property name="dataConfig"><ref bean="dataConfig"/></property>
      <property name="data"> <ref bean="data"/> </property>
    </bean>
  </property>
</bean>
<bean id="styleListFinder" class="org.geoserver.rest.BeanResourceFinder">
  <property name="beanToFind">
    <bean class="org.geoserver.restconfig.StyleListResource">
      <property name="dataConfig"><ref bean="dataConfig"/></property>
    </bean>
  </property>
</bean>
<bean id="layerGroupFinder" class="org.geoserver.rest.BeanResourceFinder">
  <property name="beanToFind">
    <bean class="org.geoserver.restconfig.LayerGroupResource">
      <property name="WMSConfig"><ref bean="wmsConfig"/></property>
      <property name="WMS"><ref bean="wms"/></property>
      <property name="WFS"><ref bean="wfs"/></property>
      <property name="WCS"><ref bean="wcs"/></property>
      <property name="geoserver"><ref bean="geoServer"/> </property>
    </bean>
  </property>
</bean> 
<bean name="layerGroupListFinder" class="org.geoserver.rest.BeanResourceFinder">
  <property name="beanToFind">
    <bean class="org.geoserver.restconfig.LayerGroupListResource">
      <property name="WMSConfig"><ref bean="wmsConfig"/></property>
    </bean>
  </property>
</bean>
<bean id="dummyRestlet" class="org.geoserver.restconfig.DummyRestlet"/>


</beans>
